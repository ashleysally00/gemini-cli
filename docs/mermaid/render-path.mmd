graph TD
    classDef new fill:#98fb98,color:#000
    classDef changed fill:#add8e6,color:#000
    classDef unchanged fill:#f0f0f0,color:#000
    classDef dispatcher fill:#f9e79f,color:#000,stroke:#333,stroke-width:1px
    
    subgraph "Entry Point"
        A["gemini.tsx"]
    end
    
    subgraph "State & Logic Wrapper"
        B["AppContainer.tsx"]
    end
    
    subgraph "                    Primary Layout                    "
        C["App.tsx"]
    end
    
    A -.-> B
    B -.-> C
    
    subgraph "UI Containers"
        C -.-> D["MainContent"]
        C -.-> G["Composer"]
        C -.-> F["DialogManager"]
        C -.-> E["Notifications"]
    end
    
    subgraph "MainContent"
        D -.-> H["AppHeader"]
        D -.-> I["HistoryItemDisplay"]:::dispatcher
        D -.-> L["ShowMoreLines"]
    end
    
    subgraph "Composer"
        G -.-> K_Prompt["InputPrompt"]
        G -.-> K_Footer["Footer"]
    end
    
    subgraph "DialogManager"
        F -.-> J["Various Dialogs<br>(Auth, Theme, Settings, etc.)"]
    end
    
    class B,D,E,F,G,H,J,K_Prompt,L new
    class A,C,I changed
    class K_Footer unchanged
```

The key change is on line 13:
```
subgraph "                    Primary Layout                    "
